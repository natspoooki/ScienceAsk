<!DOCTYPE html>
<html>
<head>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style1.css') }}">
    <title>Science Ask!</title>
    <style>
      /* Simple styling for logo and header */
      header {
          display: flex;
          align-items: center;
          padding: 10px;
          border-bottom: 1px solid #ccc;
          margin-bottom: 20px;
      }
      header img.logo {
          height: 90px;
          margin-right: 10px;
          cursor: pointer;
      }
      header a {
          text-decoration: none;
          font-size: 24px;
          font-weight: bold;
          color: #333;
      }
      nav {
          margin-left: auto;
          font-size: 14px;
      }
      nav a {
          margin-left: 10px;
          text-decoration: none;
          color: #333;
      }
    </style>
</head>
<body>
    {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <ul class="flashes">
      {% for category, message in messages %}
        <li class="{{ category }}">{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

    <header>
        <a href="{{ url_for('home') }}">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo">
            Science Ask!
        </a>

        <nav>
    <button id="darkModeToggle" class="btn btn-secondary">ðŸŒ™ Dark Mode</button>
    <script>
      // Toggle dark mode and save preference in localStorage
      const toggleBtn = document.getElementById('darkModeToggle');

      // Load mode on page load
      if (localStorage.getItem('darkMode') === 'enabled') {
        document.body.classList.add('dark-mode');
      }

      toggleBtn.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');
        
        if (document.body.classList.contains('dark-mode')) {
          localStorage.setItem('darkMode', 'enabled');
          toggleBtn.textContent = 'Light Mode';
        } else {
          localStorage.setItem('darkMode', 'disabled');
          toggleBtn.textContent = 'Dark Mode';
        }
      });

      // Set button text on page load
      toggleBtn.textContent = document.body.classList.contains('dark-mode') ? 'Light Mode' : 'Dark Mode';
    </script>
    <br><br>

    {% if current_user.is_authenticated %}
        Logged in as
    <a href="{{ url_for('profile', username=current_user.username) }}" 
   style="font-weight:bold; color:#007bff; font-size:1.1rem;">
    {{ current_user.username }}
</a>

        | <a href="{{ url_for('logout') }}">Logout</a>
    {% else %}
        <a href="{{ url_for('login') }}">Login</a> |
        <a href="{{ url_for('register') }}">Register</a>
    {% endif %}
</nav>

    </header>

    {% block content %}{% endblock %}
    
</body>
</html>
